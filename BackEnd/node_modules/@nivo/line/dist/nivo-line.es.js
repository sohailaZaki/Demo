import{memo as e,useMemo as i,useState as o,useCallback as r,createElement as n,Fragment as t,forwardRef as a,useRef as s,useEffect as l}from"react";import{useTheme as u,lineCurvePropType as d,blendModePropType as c,motionPropTypes as h,defsPropTypes as f,curveFromProp as p,useValueFormatter as v,useMotionConfig as y,useAnimatedPath as b,getLabelGenerator as m,DotsItem as g,withContainer as x,useDimensions as R,CartesianMarkers as T,bindDefs as q,SvgWrapper as M,ResponsiveWrapper as O,getRelativeCursor as S,isCursorInRect as C}from"@nivo/core";import{ordinalColorsPropType as w,useOrdinalColorScale as k,useInheritedColor as B}from"@nivo/colors";import{axisPropType as E,Grid as L,Axes as W,renderGridLinesToCanvas as G,renderAxesToCanvas as P}from"@nivo/axes";import{LegendPropShape as j,BoxLegendSvg as F,renderLegendToCanvas as V}from"@nivo/legends";import{BasicTooltip as Y,TableTooltip as D,Chip as I,useTooltip as X,Crosshair as A}from"@nivo/tooltip";import{line as z,area as H}from"d3-shape";import{computeXYScalesForSeries as J}from"@nivo/scales";import K from"lodash/uniqueId";import N from"prop-types";import{jsx as Q,jsxs as U}from"react/jsx-runtime";import{useSpring as Z,animated as $}from"@react-spring/web";import{Mesh as _,useVoronoiMesh as ee,renderVoronoiToCanvas as ie,renderVoronoiCellToCanvas as oe}from"@nivo/voronoi";function re(){return re=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},re.apply(this,arguments)}var ne=function(e){var i=e.point;return Q(Y,{id:U("span",{children:["x: ",Q("strong",{children:i.data.xFormatted}),", y:"," ",Q("strong",{children:i.data.yFormatted})]}),enableChip:!0,color:i.serieColor})};ne.propTypes={point:N.object.isRequired};var te=e(ne),ae=function(e){var i=e.slice,o=e.axis,r=u(),n="x"===o?"y":"x";return Q(D,{rows:i.points.map((function(e){return[Q(I,{color:e.serieColor,style:r.tooltip.chip},"chip"),e.serieId,Q("span",{style:r.tooltip.tableCellValue,children:e.data[n+"Formatted"]},"value")]}))})};ae.propTypes={slice:N.object.isRequired,axis:N.oneOf(["x","y"]).isRequired};var se=e(ae),le={data:N.arrayOf(N.shape({id:N.oneOfType([N.string,N.number]).isRequired,data:N.arrayOf(N.shape({x:N.oneOfType([N.number,N.string,N.instanceOf(Date)]),y:N.oneOfType([N.number,N.string,N.instanceOf(Date)])})).isRequired})).isRequired,xScale:N.object.isRequired,xFormat:N.oneOfType([N.func,N.string]),yScale:N.object.isRequired,yFormat:N.oneOfType([N.func,N.string]),layers:N.arrayOf(N.oneOfType([N.oneOf(["grid","markers","axes","areas","crosshair","lines","slices","points","mesh","legends"]),N.func])).isRequired,curve:d.isRequired,axisTop:E,axisRight:E,axisBottom:E,axisLeft:E,enableGridX:N.bool.isRequired,enableGridY:N.bool.isRequired,gridXValues:N.oneOfType([N.number,N.arrayOf(N.oneOfType([N.number,N.string,N.instanceOf(Date)]))]),gridYValues:N.oneOfType([N.number,N.arrayOf(N.oneOfType([N.number,N.string,N.instanceOf(Date)]))]),enablePoints:N.bool.isRequired,pointSymbol:N.func,pointSize:N.number.isRequired,pointColor:N.any.isRequired,pointBorderWidth:N.number.isRequired,pointBorderColor:N.any.isRequired,enablePointLabel:N.bool.isRequired,pointLabel:N.oneOfType([N.string,N.func]).isRequired,markers:N.arrayOf(N.shape({axis:N.oneOf(["x","y"]).isRequired,value:N.oneOfType([N.number,N.string,N.instanceOf(Date)]).isRequired,style:N.object})),colors:w.isRequired,enableArea:N.bool.isRequired,areaOpacity:N.number.isRequired,areaBlendMode:c.isRequired,areaBaselineValue:N.oneOfType([N.number,N.string,N.instanceOf(Date)]).isRequired,lineWidth:N.number.isRequired,legends:N.arrayOf(N.shape(j)).isRequired,isInteractive:N.bool.isRequired,debugMesh:N.bool.isRequired,tooltip:N.oneOfType([N.func,N.object]).isRequired,enableSlices:N.oneOf(["x","y",!1]).isRequired,debugSlices:N.bool.isRequired,sliceTooltip:N.oneOfType([N.func,N.object]).isRequired,enableCrosshair:N.bool.isRequired,crosshairType:N.string.isRequired},ue=re({},le,{enablePointLabel:N.bool.isRequired,role:N.string.isRequired,useMesh:N.bool.isRequired,enableTouchCrosshair:N.bool},h,f),de=re({pixelRatio:N.number.isRequired},le),ce={curve:"linear",xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},layers:["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"],axisBottom:{},axisLeft:{},enableGridX:!0,enableGridY:!0,enablePoints:!0,pointSize:6,pointColor:{from:"color"},pointBorderWidth:0,pointBorderColor:{theme:"background"},enablePointLabel:!1,pointLabel:"yFormatted",colors:{scheme:"nivo"},enableArea:!1,areaBaselineValue:0,areaOpacity:.2,areaBlendMode:"normal",lineWidth:2,legends:[],isInteractive:!0,tooltip:te,enableSlices:!1,debugSlices:!1,sliceTooltip:se,debugMesh:!1,enableCrosshair:!0,crosshairType:"bottom-left"},he=re({},ce,{enablePointLabel:!1,useMesh:!1,enableTouchCrosshair:!1,animate:!0,motionConfig:"gentle",defs:[],fill:[],role:"img"}),fe=re({},ce,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),pe=function(e){var o=e.curve;return i((function(){return z().defined((function(e){return null!==e.x&&null!==e.y})).x((function(e){return e.x})).y((function(e){return e.y})).curve(p(o))}),[o])},ve=function(e){var o=e.curve,r=e.yScale,n=e.areaBaselineValue;return i((function(){return H().defined((function(e){return null!==e.x&&null!==e.y})).x((function(e){return e.x})).y1((function(e){return e.y})).curve(p(o)).y0(r(n))}),[o,r,n])},ye=function(e){var o=e.componentId,r=e.enableSlices,n=e.points,t=e.width,a=e.height;return i((function(){if(!1===r)return[];if("x"===r){var e=new Map;return n.forEach((function(i){null!==i.data.x&&null!==i.data.y&&(e.has(i.x)?e.get(i.x).push(i):e.set(i.x,[i]))})),Array.from(e.entries()).sort((function(e,i){return e[0]-i[0]})).map((function(e,i,r){var n,s,l=e[0],u=e[1],d=r[i-1],c=r[i+1];return n=d?l-(l-d[0])/2:l,s=c?l-n+(c[0]-l)/2:t-n,{id:"slice:"+o+":"+l,x0:n,x:l,y0:0,y:0,width:s,height:a,points:u.reverse()}}))}if("y"===r){var i=new Map;return n.forEach((function(e){null!==e.data.x&&null!==e.data.y&&(i.has(e.y)?i.get(e.y).push(e):i.set(e.y,[e]))})),Array.from(i.entries()).sort((function(e,i){return e[0]-i[0]})).map((function(e,i,o){var r,n,s=e[0],l=e[1],u=o[i-1],d=o[i+1];return r=u?s-(s-u[0])/2:s,n=d?s-r+(d[0]-s)/2:a-r,{id:s,x0:0,x:0,y0:r,y:s,width:t,height:n,points:l.reverse()}}))}}),[o,r,a,n,t])},be="line",me=function(e){var n=e.data,t=e.xScale,a=void 0===t?he.xScale:t,s=e.xFormat,l=e.yScale,d=void 0===l?he.yScale:l,c=e.yFormat,h=e.width,f=e.height,p=e.colors,y=void 0===p?he.colors:p,b=e.curve,m=void 0===b?he.curve:b,g=e.areaBaselineValue,x=void 0===g?he.areaBaselineValue:g,R=e.pointColor,T=void 0===R?he.pointColor:R,q=e.pointBorderColor,M=void 0===q?he.pointBorderColor:q,O=e.enableSlices,S=void 0===O?he.enableSlicesTooltip:O,C=o(K(be))[0],w=v(s),E=v(c),L=k(y,"id"),W=u(),G=B(T,W),P=B(M,W),j=o([]),F=j[0],V=j[1],Y=i((function(){return J(n.filter((function(e){return-1===F.indexOf(e.id)})),a,d,h,f)}),[n,F,a,d,h,f]),D=Y.xScale,I=Y.yScale,X=Y.series,A=i((function(){var e=n.map((function(e){return{id:e.id,label:e.id,color:L(e)}})),i=e.map((function(e){return re({},X.find((function(i){return i.id===e.id})),{color:e.color})})).filter((function(e){return Boolean(e.id)}));return{legendData:e.map((function(e){return re({},e,{hidden:!i.find((function(i){return i.id===e.id}))})})).reverse(),series:i}}),[n,X,L]),z=A.legendData,H=A.series,N=r((function(e){V((function(i){return i.indexOf(e)>-1?i.filter((function(i){return i!==e})):[].concat(i,[e])}))}),[]),Q=function(e){var o=e.series,r=e.getPointColor,n=e.getPointBorderColor,t=e.formatX,a=e.formatY;return i((function(){return o.reduce((function(e,i){return[].concat(e,i.data.filter((function(e){return null!==e.position.x&&null!==e.position.y})).map((function(o,s){var l={id:i.id+"."+s,index:e.length+s,serieId:i.id,serieColor:i.color,x:o.position.x,y:o.position.y};return l.color=r(i),l.borderColor=n(l),l.data=re({},o.data,{xFormatted:t(o.data.x),yFormatted:a(o.data.y)}),l})))}),[])}),[o,r,n,t,a])}({series:H,getPointColor:G,getPointBorderColor:P,formatX:w,formatY:E}),U=ye({componentId:C,enableSlices:S,points:Q,width:h,height:f});return{legendData:z,toggleSerie:N,lineGenerator:pe({curve:m}),areaGenerator:ve({curve:m,yScale:I,areaBaselineValue:x}),getColor:L,series:H,xScale:D,yScale:I,slices:U,points:Q}},ge=function(e){var i=e.areaBlendMode,o=e.areaOpacity,r=e.color,n=e.fill,t=e.path,a=y(),s=a.animate,l=a.config,u=b(t),d=Z({color:r,config:l,immediate:!s});return Q($.path,{d:u,fill:n||d.color,fillOpacity:o,strokeWidth:0,style:{mixBlendMode:i}})};ge.propTypes={areaBlendMode:c.isRequired,areaOpacity:N.number.isRequired,color:N.string,fill:N.string,path:N.string.isRequired};var xe=function(e){var i=e.areaGenerator,o=e.areaOpacity,r=e.areaBlendMode,n=e.lines.slice(0).reverse();return Q("g",{children:n.map((function(e){return Q(ge,re({path:i(e.data.map((function(e){return e.position})))},re({areaOpacity:o,areaBlendMode:r},e)),e.id)}))})};xe.propTypes={areaGenerator:N.func.isRequired,areaOpacity:N.number.isRequired,areaBlendMode:c.isRequired,lines:N.arrayOf(N.object).isRequired};var Re=e(xe),Te=function(e){var o=e.lineGenerator,r=e.points,n=e.color,t=e.thickness,a=i((function(){return o(r)}),[o,r]),s=b(a);return Q($.path,{d:s,fill:"none",strokeWidth:t,stroke:n})};Te.propTypes={points:N.arrayOf(N.shape({x:N.oneOfType([N.string,N.number]),y:N.oneOfType([N.string,N.number])})),lineGenerator:N.func.isRequired,color:N.string.isRequired,thickness:N.number.isRequired};var qe=e(Te),Me=function(e){var i=e.lines,o=e.lineGenerator,r=e.lineWidth;return i.slice(0).reverse().map((function(e){var i=e.id,n=e.data,t=e.color;return Q(qe,{id:i,points:n.map((function(e){return e.position})),lineGenerator:o,color:t,thickness:r},i)}))};Me.propTypes={lines:N.arrayOf(N.shape({id:N.oneOfType([N.string,N.number]).isRequired,color:N.string.isRequired,data:N.arrayOf(N.shape({data:N.shape({x:N.oneOfType([N.string,N.number,N.instanceOf(Date)]),y:N.oneOfType([N.string,N.number,N.instanceOf(Date)])}).isRequired,position:N.shape({x:N.number,y:N.number}).isRequired})).isRequired})).isRequired,lineWidth:N.number.isRequired,lineGenerator:N.func.isRequired};var Oe=e(Me),Se=function(e){var i=e.slice,o=e.slices,t=e.axis,a=e.debug,s=e.tooltip,l=e.isCurrent,u=e.setCurrent,d=e.onMouseEnter,c=e.onMouseMove,h=e.onMouseLeave,f=e.onClick,p=e.onTouchStart,v=e.onTouchMove,y=e.onTouchEnd,b=X(),m=b.showTooltipFromEvent,g=b.hideTooltip,x=r((function(e){m(n(s,{slice:i,axis:t}),e,"right"),u(i),d&&d(i,e)}),[m,s,i,t,u,d]),R=r((function(e){m(n(s,{slice:i,axis:t}),e,"right"),c&&c(i,e)}),[m,s,i,t,c]),T=r((function(e){g(),u(null),h&&h(i,e)}),[g,u,h,i]),q=r((function(e){f&&f(i,e)}),[i,f]),M=r((function(e){m(n(s,{slice:i,axis:t}),e,"right"),u(i),p&&p(i,e)}),[t,p,u,m,i,s]),O=r((function(e){var r=e.touches[0],a=document.elementFromPoint(r.clientX,r.clientY),l=null==a?void 0:a.getAttribute("data-ref");if(l){var d=o.find((function(e){return e.id===l}));d&&(m(n(s,{slice:d,axis:t}),e,"right"),u(d))}v&&v(i,e)}),[t,v,u,m,i,o,s]),S=r((function(e){g(),u(null),y&&y(i,e)}),[g,u,y,i]);return Q("rect",{x:i.x0,y:i.y0,width:i.width,height:i.height,stroke:"red",strokeWidth:a?1:0,strokeOpacity:.75,fill:"red",fillOpacity:l&&a?.35:0,onMouseEnter:x,onMouseMove:R,onMouseLeave:T,onClick:q,onTouchStart:M,onTouchMove:O,onTouchEnd:S,"data-ref":i.id})};Se.propTypes={slice:N.object.isRequired,slices:N.arrayOf(N.object).isRequired,axis:N.oneOf(["x","y"]).isRequired,debug:N.bool.isRequired,height:N.number.isRequired,tooltip:N.oneOfType([N.func,N.object]),isCurrent:N.bool.isRequired,setCurrent:N.func.isRequired,onMouseEnter:N.func,onMouseMove:N.func,onMouseLeave:N.func,onClick:N.func};var Ce=e(Se),we=function(e){var i=e.slices,o=e.axis,r=e.debug,n=e.height,t=e.tooltip,a=e.current,s=e.setCurrent,l=e.onMouseEnter,u=e.onMouseMove,d=e.onMouseLeave,c=e.onClick,h=e.onTouchStart,f=e.onTouchMove,p=e.onTouchEnd;return i.map((function(e){return Q(Ce,{slice:e,slices:i,axis:o,debug:r,height:n,tooltip:t,setCurrent:s,isCurrent:null!==a&&a.id===e.id,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:c,onTouchStart:h,onTouchMove:f,onTouchEnd:p},e.id)}))};we.propTypes={slices:N.arrayOf(N.shape({id:N.oneOfType([N.number,N.string,N.instanceOf(Date)]).isRequired,x:N.number.isRequired,y:N.number.isRequired,points:N.arrayOf(N.object).isRequired})).isRequired,axis:N.oneOf(["x","y"]).isRequired,debug:N.bool.isRequired,height:N.number.isRequired,tooltip:N.oneOfType([N.func,N.object]).isRequired,current:N.object,setCurrent:N.func.isRequired,onMouseEnter:N.func,onMouseMove:N.func,onMouseLeave:N.func,onClick:N.func,onTouchStart:N.func,onTouchMove:N.func,onTouchEnd:N.func};var ke=e(we),Be=function(e){var i=e.points,o=e.symbol,r=e.size,n=e.borderWidth,t=e.enableLabel,a=e.label,s=e.labelYOffset,l=u(),d=m(a),c=i.slice(0).reverse().map((function(e){return{id:e.id,x:e.x,y:e.y,datum:e.data,fill:e.color,stroke:e.borderColor,label:t?d(e.data):null}}));return Q("g",{children:c.map((function(e){return Q(g,{x:e.x,y:e.y,datum:e.datum,symbol:o,size:r,color:e.fill,borderWidth:n,borderColor:e.stroke,label:e.label,labelYOffset:s,theme:l},e.id)}))})};Be.propTypes={points:N.arrayOf(N.object),symbol:N.func,size:N.number.isRequired,color:N.func.isRequired,borderWidth:N.number.isRequired,borderColor:N.func.isRequired,enableLabel:N.bool.isRequired,label:N.oneOfType([N.string,N.func]).isRequired,labelYOffset:N.number};var Ee=e(Be),Le=function(e){var i=e.points,o=e.width,t=e.height,a=e.margin,s=e.setCurrent,l=e.onMouseEnter,u=e.onMouseMove,d=e.onMouseLeave,c=e.onClick,h=e.onTouchStart,f=e.onTouchMove,p=e.onTouchEnd,v=e.tooltip,y=e.debug,b=e.enableTouchCrosshair,m=X(),g=m.showTooltipAt,x=m.hideTooltip,R=r((function(e,i){g(n(v,{point:e}),[e.x+a.left,e.y+a.top],"top"),s(e),l&&l(e,i)}),[s,g,v,l,a]),T=r((function(e,i){g(n(v,{point:e}),[e.x+a.left,e.y+a.top],"top"),s(e),u&&u(e,i)}),[g,v,a.left,a.top,s,u]),q=r((function(e,i){x(),s(null),d&&d(e,i)}),[x,s,d]),M=r((function(e,i){c&&c(e,i)}),[c]),O=r((function(e,i){g(n(v,{point:e}),[e.x+a.left,e.y+a.top],"top"),s(e),h&&h(e,i)}),[a.left,a.top,h,s,g,v]),S=r((function(e,i){g(n(v,{point:e}),[e.x+a.left,e.y+a.top],"top"),s(e),f&&f(e,i)}),[a.left,a.top,f,s,g,v]),C=r((function(e,i){x(),s(null),p&&p(e,i)}),[p,x,s]);return Q(_,{nodes:i,width:o,height:t,onMouseEnter:R,onMouseMove:T,onMouseLeave:q,onClick:M,onTouchStart:O,onTouchMove:S,onTouchEnd:C,enableTouchCrosshair:b,debug:y})};Le.propTypes={points:N.arrayOf(N.object).isRequired,width:N.number.isRequired,height:N.number.isRequired,margin:N.object.isRequired,setCurrent:N.func.isRequired,onMouseEnter:N.func,onMouseMove:N.func,onMouseLeave:N.func,onClick:N.func,onTouchStart:N.func,onTouchMove:N.func,onTouchEnd:N.func,tooltip:N.oneOfType([N.func,N.object]).isRequired,debug:N.bool.isRequired};var We=e(Le),Ge=function(e){var i=e.data,r=e.xScale,n=void 0===r?{type:"point"}:r,a=e.xFormat,s=e.yScale,l=void 0===s?{type:"linear",min:0,max:"auto"}:s,d=e.yFormat,c=e.layers,h=void 0===c?["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"]:c,f=e.curve,p=void 0===f?"linear":f,v=e.areaBaselineValue,y=void 0===v?0:v,b=e.colors,m=void 0===b?{scheme:"nivo"}:b,g=e.margin,x=e.width,O=e.height,S=e.axisTop,C=e.axisRight,w=e.axisBottom,k=void 0===w?{}:w,E=e.axisLeft,G=void 0===E?{}:E,P=e.enableGridX,j=void 0===P||P,V=e.enableGridY,Y=void 0===V||V,D=e.gridXValues,I=e.gridYValues,X=e.lineWidth,z=void 0===X?2:X,H=e.enableArea,J=void 0!==H&&H,K=e.areaOpacity,N=void 0===K?.2:K,U=e.areaBlendMode,Z=void 0===U?"normal":U,$=e.enablePoints,_=void 0===$||$,ee=e.pointSymbol,ie=e.pointSize,oe=void 0===ie?6:ie,ne=e.pointColor,ae=void 0===ne?{from:"color"}:ne,le=e.pointBorderWidth,ue=void 0===le?0:le,de=e.pointBorderColor,ce=void 0===de?{theme:"background"}:de,he=e.enablePointLabel,fe=void 0!==he&&he,pe=e.pointLabel,ve=void 0===pe?"yFormatted":pe,ye=e.pointLabelYOffset,be=e.defs,ge=void 0===be?[]:be,xe=e.fill,Te=void 0===xe?[]:xe,qe=e.markers,Me=e.legends,Se=void 0===Me?[]:Me,Ce=e.isInteractive,we=void 0===Ce||Ce,Be=e.useMesh,Le=void 0!==Be&&Be,Ge=e.debugMesh,Pe=void 0!==Ge&&Ge,je=e.onMouseEnter,Fe=e.onMouseMove,Ve=e.onMouseLeave,Ye=e.onClick,De=e.onTouchStart,Ie=e.onTouchMove,Xe=e.onTouchEnd,Ae=e.tooltip,ze=void 0===Ae?te:Ae,He=e.enableSlices,Je=void 0!==He&&He,Ke=e.debugSlices,Ne=void 0!==Ke&&Ke,Qe=e.sliceTooltip,Ue=void 0===Qe?se:Qe,Ze=e.enableCrosshair,$e=void 0===Ze||Ze,_e=e.crosshairType,ei=void 0===_e?"bottom-left":_e,ii=e.enableTouchCrosshair,oi=void 0!==ii&&ii,ri=e.role,ni=void 0===ri?"img":ri,ti=R(x,O,g),ai=ti.margin,si=ti.innerWidth,li=ti.innerHeight,ui=ti.outerWidth,di=ti.outerHeight,ci=me({data:i,xScale:n,xFormat:a,yScale:l,yFormat:d,width:si,height:li,colors:m,curve:p,areaBaselineValue:y,pointColor:ae,pointBorderColor:ce,enableSlices:Je}),hi=ci.legendData,fi=ci.toggleSerie,pi=ci.lineGenerator,vi=ci.areaGenerator,yi=ci.series,bi=ci.xScale,mi=ci.yScale,gi=ci.slices,xi=ci.points,Ri=u(),Ti=B(ae,Ri),qi=B(ce,Ri),Mi=o(null),Oi=Mi[0],Si=Mi[1],Ci=o(null),wi=Ci[0],ki=Ci[1],Bi={grid:Q(L,{theme:Ri,width:si,height:li,xScale:j?bi:null,yScale:Y?mi:null,xValues:D,yValues:I},"grid"),markers:Q(T,{markers:qe,width:si,height:li,xScale:bi,yScale:mi,theme:Ri},"markers"),axes:Q(W,{xScale:bi,yScale:mi,width:si,height:li,theme:Ri,top:S,right:C,bottom:k,left:G},"axes"),areas:null,lines:Q(Oe,{lines:yi,lineGenerator:pi,lineWidth:z},"lines"),slices:null,points:null,crosshair:null,mesh:null,legends:Se.map((function(e,i){return Q(F,re({},e,{containerWidth:si,containerHeight:li,data:e.data||hi,theme:Ri,toggleSerie:e.toggleSerie?fi:void 0}),"legend."+i)}))},Ei=q(ge,yi,Te);return J&&(Bi.areas=Q(Re,{areaGenerator:vi,areaOpacity:N,areaBlendMode:Z,lines:yi},"areas")),we&&!1!==Je&&(Bi.slices=Q(ke,{slices:gi,axis:Je,debug:Ne,height:li,tooltip:Ue,current:wi,setCurrent:ki,onMouseEnter:je,onMouseMove:Fe,onMouseLeave:Ve,onClick:Ye,onTouchStart:De,onTouchMove:Ie,onTouchEnd:Xe},"slices")),_&&(Bi.points=Q(Ee,{points:xi,symbol:ee,size:oe,color:Ti,borderWidth:ue,borderColor:qi,enableLabel:fe,label:ve,labelYOffset:ye},"points")),we&&$e&&(null!==Oi&&(Bi.crosshair=Q(A,{width:si,height:li,x:Oi.x,y:Oi.y,type:ei},"crosshair")),null!==wi&&(Bi.crosshair=Q(A,{width:si,height:li,x:wi.x,y:wi.y,type:Je},"crosshair"))),we&&Le&&!1===Je&&(Bi.mesh=Q(We,{points:xi,width:si,height:li,margin:ai,current:Oi,setCurrent:Si,onMouseEnter:je,onMouseMove:Fe,onMouseLeave:Ve,onClick:Ye,onTouchStart:De,onTouchMove:Ie,onTouchEnd:Xe,tooltip:ze,enableTouchCrosshair:oi,debug:Pe},"mesh")),Q(M,{defs:Ei,width:ui,height:di,margin:ai,role:ni,children:h.map((function(i,o){return"function"==typeof i?Q(t,{children:i(re({},e,{innerWidth:si,innerHeight:li,series:yi,slices:gi,points:xi,xScale:bi,yScale:mi,lineGenerator:pi,areaGenerator:vi,currentPoint:Oi,setCurrentPoint:Si,currentSlice:wi,setCurrentSlice:ki}))},o):Bi[i]}))})};Ge.propTypes=ue;var Pe=x(Ge),je=function(e){return Q(O,{children:function(i){var o=i.width,r=i.height;return Q(Pe,re({width:o,height:r},e))}})},Fe=function(e){var i=s(null),t=e.width,a=e.height,d=e.margin,c=e.pixelRatio,h=void 0===c?"undefined"!=typeof window&&window.devicePixelRatio||1:c,f=e.data,p=e.xScale,v=void 0===p?{type:"point"}:p,y=e.xFormat,b=e.yScale,m=void 0===b?{type:"linear",min:0,max:"auto"}:b,g=e.yFormat,x=e.curve,T=void 0===x?"linear":x,q=e.layers,M=void 0===q?["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"]:q,O=e.colors,w=void 0===O?{scheme:"nivo"}:O,k=e.lineWidth,B=void 0===k?2:k,E=e.enableArea,L=void 0!==E&&E,W=e.areaBaselineValue,j=void 0===W?0:W,F=e.areaOpacity,Y=void 0===F?.2:F,D=e.enablePoints,I=void 0===D||D,A=e.pointSize,z=void 0===A?6:A,H=e.pointColor,J=void 0===H?{from:"color"}:H,K=e.pointBorderWidth,N=void 0===K?0:K,U=e.pointBorderColor,Z=void 0===U?{theme:"background"}:U,$=e.enableGridX,_=void 0===$||$,ne=e.gridXValues,ae=e.enableGridY,se=void 0===ae||ae,le=e.gridYValues,ue=e.axisTop,de=e.axisRight,ce=e.axisBottom,he=void 0===ce?{}:ce,fe=e.axisLeft,pe=void 0===fe?{}:fe,ve=e.legends,ye=void 0===ve?[]:ve,be=e.isInteractive,ge=void 0===be||be,xe=e.debugMesh,Re=void 0!==xe&&xe,Te=e.onMouseLeave,qe=e.onClick,Me=e.tooltip,Oe=void 0===Me?te:Me,Se=e.canvasRef,Ce=R(t,a,d),we=Ce.margin,ke=Ce.innerWidth,Be=Ce.innerHeight,Ee=Ce.outerWidth,Le=Ce.outerHeight,We=u(),Ge=o(null),Pe=Ge[0],je=Ge[1],Fe=me({data:f,xScale:v,xFormat:y,yScale:m,yFormat:g,width:ke,height:Be,colors:w,curve:T,areaBaselineValue:j,pointColor:J,pointBorderColor:Z}),Ve=Fe.lineGenerator,Ye=Fe.areaGenerator,De=Fe.series,Ie=Fe.xScale,Xe=Fe.yScale,Ae=Fe.points,ze=ee({points:Ae,width:ke,height:Be,debug:Re}),He=ze.delaunay,Je=ze.voronoi;l((function(){Se&&(Se.current=i.current),i.current.width=Ee*h,i.current.height=Le*h;var e=i.current.getContext("2d");e.scale(h,h),e.fillStyle=We.background,e.fillRect(0,0,Ee,Le),e.translate(we.left,we.top),M.forEach((function(i){if("function"==typeof i&&i({ctx:e,innerWidth:ke,innerHeight:Be,series:De,points:Ae,xScale:Ie,yScale:Xe,lineWidth:B,lineGenerator:Ve,areaGenerator:Ye,currentPoint:Pe,setCurrentPoint:je}),"grid"===i&&We.grid.line.strokeWidth>0&&(e.lineWidth=We.grid.line.strokeWidth,e.strokeStyle=We.grid.line.stroke,_&&G(e,{width:ke,height:Be,scale:Ie,axis:"x",values:ne}),se&&G(e,{width:ke,height:Be,scale:Xe,axis:"y",values:le})),"axes"===i&&P(e,{xScale:Ie,yScale:Xe,width:ke,height:Be,top:ue,right:de,bottom:he,left:pe,theme:We}),"areas"===i&&!0===L&&(e.save(),e.globalAlpha=Y,Ye.context(e),De.forEach((function(i){e.fillStyle=i.color,e.beginPath(),Ye(i.data.map((function(e){return e.position}))),e.fill()})),e.restore()),"lines"===i&&(Ve.context(e),De.forEach((function(i){e.strokeStyle=i.color,e.lineWidth=B,e.beginPath(),Ve(i.data.map((function(e){return e.position}))),e.stroke()}))),"points"===i&&!0===I&&z>0&&Ae.forEach((function(i){e.fillStyle=i.color,e.beginPath(),e.arc(i.x,i.y,z/2,0,2*Math.PI),e.fill(),N>0&&(e.strokeStyle=i.borderColor,e.lineWidth=N,e.stroke())})),"mesh"===i&&!0===Re&&(ie(e,Je),Pe&&oe(e,Je,Pe.index)),"legends"===i){var o=De.map((function(e){return{id:e.id,label:e.id,color:e.color}})).reverse();ye.forEach((function(i){V(e,re({},i,{data:i.data||o,containerWidth:ke,containerHeight:Be,theme:We}))}))}}))}),[i,Ee,Le,M,We,Ve,De,Ie,Xe,_,ne,se,le,ue,de,he,pe,ye,Ae,I,z,Pe]);var Ke=r((function(e){var o=S(i.current,e),r=o[0],n=o[1];if(!C(we.left,we.top,ke,Be,r,n))return null;var t=He.find(r-we.left,n-we.top);return Ae[t]}),[i,we,ke,Be,He]),Ne=X(),Qe=Ne.showTooltipFromEvent,Ue=Ne.hideTooltip,Ze=r((function(e){var i=Ke(e);je(i),i?Qe(n(Oe,{point:i}),e):Ue()}),[Ke,je,Qe,Ue,Oe]),$e=r((function(e){Ue(),je(null),Pe&&Te&&Te(Pe,e)}),[Ue,je,Te]),_e=r((function(e){if(qe){var i=Ke(e);i&&qe(i,e)}}),[Ke,qe]);return Q("canvas",{ref:i,width:Ee*h,height:Le*h,style:{width:Ee,height:Le,cursor:ge?"auto":"normal"},onMouseEnter:ge?Ze:void 0,onMouseMove:ge?Ze:void 0,onMouseLeave:ge?$e:void 0,onClick:ge?_e:void 0})};Fe.propTypes=de;var Ve=x(Fe),Ye=a((function(e,i){return Q(Ve,re({},e,{canvasRef:i}))})),De=a((function(e,i){return Q(O,{children:function(o){var r=o.width,n=o.height;return Q(Ye,re({width:r,height:n},e,{ref:i}))}})}));export{be as LINE_UNIQUE_ID_PREFIX,Pe as Line,Ye as LineCanvas,fe as LineCanvasDefaultProps,de as LineCanvasPropTypes,he as LineDefaultProps,ue as LinePropTypes,je as ResponsiveLine,De as ResponsiveLineCanvas,ve as useAreaGenerator,me as useLine,pe as useLineGenerator,ye as useSlices};
//# sourceMappingURL=nivo-line.es.js.map
